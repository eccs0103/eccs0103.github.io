body {
	margin-inline: auto;
	width: 100%;
	max-width: 100vmin;
	overflow-y: auto;

	&:has(dialog[open]) {
		overflow: hidden;
	}

	& header {
		& img[alt="eccs0103 logo"] {
			width: calc(6 * var(--size-standart));
		}

		& button#connections-hub-trigger {
			position: absolute;
			inset: var(--size-large-gap) auto auto var(--size-large-gap);

			& > span.icon {
				--url: url(../../assets/icons/information.svg);
			}
		}
	}

	& main {
		& span.intro {
			align-self: center;
			text-align: center;
		}

		& div.activity {
			display: grid;
			grid-template:
				'activity-icon		activity-platform	activity-timepan' max-content
				'activity-content	activity-content	activity-content' max-content
				/ max-content max-content 1fr
			;

			&.rounded {
				border-radius: calc(var(--size-gap) * 2);
			}

			& > img.icon {
				grid-area: activity-icon;
				width: var(--size-standart);
			}

			& > .platform {
				grid-area: activity-platform;
				align-self: center;
			}

			& > time.activity-time {
				grid-area: activity-timepan;
				justify-self: end;
			}

			& > div.content {
				grid-area: activity-content;

				& details.github-collection {
					& > summary {
						list-style-type: disc;
						cursor: pointer;

						&::marker {
							color: var(--color-highlight);
						}
					}

					&[open] > summary {
						list-style-type: circle;
					}

					& ul.collection-content {
						margin-top: var(--size-gap);
						margin-left: 0.05em;
						padding-left: 0.7em;
						list-style-type: none;
						line-height: 1.5;
						border-left: var(--size-separator) solid var(--color-light-negative);
					}
				}

				& img.spotify-cover {
					width: calc(3 * var(--size-standart));
				}

				& img.steam-icon {
					width: calc(var(--size-standart) * 2);
					height: calc(var(--size-standart) * 2);
					border-radius: var(--size-gap);
				}

				& div.steam-group {
					& div.group-header {
						margin-left: var(--size-separator);
						margin-bottom: var(--size-small-gap);
					}

					& div.steam-gallery {
						display: grid;
						gap: var(--size-separator);
						width: 100%;
						border-radius: var(--size-gap);
						border: var(--size-separator) solid var(--color-heavy-main);
						overflow: hidden;
						background-color: var(--color-heavy-main);

						&[data-layout="1"] {
							grid-template-columns: 1fr;

							& a.screenshot-card {
								aspect-ratio: 21 / 9;
							}
						}

						&[data-layout="2"] {
							grid-template-columns: 1fr 1fr;
							aspect-ratio: 21 / 9;

							& a.screenshot-card {
								height: 100%;
							}
						}

						&[data-layout="3"] {
							grid-template-columns: 2fr 1fr;
							grid-template-rows: 1fr 1fr;
							aspect-ratio: 2 / 1;

							& a.screenshot-card:nth-child(1) {
								grid-row: 1 / -1;
								grid-column: 1 / 2;
								height: 100%;
							}

							& a.screenshot-card:nth-child(2) {
								grid-column: 2 / 3;
								grid-row: 1 / 2;
							}

							& a.screenshot-card:nth-child(3) {
								grid-column: 2 / 3;
								grid-row: 2 / 3;
							}
						}

						&[data-layout="4"] {
							grid-template-columns: 1fr 1fr;
							grid-template-rows: 1fr 1fr;
							aspect-ratio: 16 / 9;
						}

						&[data-layout="many"] {
							grid-template-columns: repeat(3, 1fr);

							& a.screenshot-card {
								aspect-ratio: 16 / 9;
							}
						}

						& a.screenshot-card {
							display: block;
							position: relative;
							overflow: hidden;

							&::after {
								content: "";
								position: absolute;
								inset: 0;
								opacity: 0;
								transition: opacity var(--time-duration);
								pointer-events: none;
							}

							&:hover {
								&::after {
									opacity: 1;
								}

								& img.steam-screenshot {
									filter: contrast(0.9);
									transform: scale(1.05);
								}

								& div.caption-overlay {
									opacity: 1;
								}
							}

							& img.steam-screenshot {
								width: 100%;
								height: 100%;
								object-fit: cover;
								display: block;
								transition: transform var(--time-duration);
							}

							& div.caption-overlay {
								position: absolute;
								bottom: 0;
								left: 0;
								width: 100%;
								padding: var(--size-gap);
								padding-top: calc(var(--size-gap) * 3);
								background: linear-gradient(to top, rgb(from var(--color-main) r g b / 80%) 0%, transparent 100%);
								color: var(--color-negative);
								font-weight: bold;
								opacity: 0;
								transition: opacity var(--time-duration);
								pointer-events: none;
							}
						}
					}
				}

				@media (max-width: 600px) {
					& div.steam-group div.steam-gallery {
						&[data-layout="many"] {
							grid-template-columns: repeat(2, 1fr);
						}

						&[data-layout="3"] {
							aspect-ratio: 1 / 1;
							grid-template-columns: 1fr;
							grid-template-rows: 2fr 1fr 1fr;

							& a.screenshot-card:nth-child(1) {
								grid-column: 1 / -1;
								grid-row: 1 / 2;
							}

							& a.screenshot-card:nth-child(2) {
								grid-column: 1 / -1;
								grid-row: 2 / 3;
							}

							& a.screenshot-card:nth-child(3) {
								grid-column: 1 / -1;
								grid-row: 3 / 4;
							}
						}
					}
				}

				& details.stack-overflow-entry {
					& > summary {
						cursor: pointer;
						list-style-type: none;

						&::-webkit-details-marker {
							display: none;
						}

						& > div.score-panel {
							min-width: var(--size-large-standart);
							padding: var(--size-gap);
							border: var(--size-separator) solid var(--color-heavy-main);
							border-radius: var(--size-gap);
							height: fit-content;

							& span.value {
								font-weight: bold;
								line-height: 1;
							}

							& span.view-count {
								margin-top: var(--size-small-gap);
								padding-top: var(--size-small-gap);
								border-top: var(--size-separator) solid var(--color-heavy-main);
								width: 100%;
								text-align: center;
								white-space: nowrap;
							}

							&.status-success {
								border-color: var(--color-highlight);
								background-color: rgb(from var(--color-highlight) r g b / 10%);

								& span.view-count {
									border-top-color: var(--color-highlight);
								}
							}
						}

						& div.summary-content {
							flex: 1;

							& a.entry-title {
								font-weight: bold;
								margin-top: var(--size-small-gap);
								display: inline-block;
							}

							& span.expand-hint {
								display: block;
								color: var(--color-light-negative);
							}

							& div.tags-list {
								flex-wrap: wrap;
								margin-top: var(--size-small-gap);

								& a.tag {
									&.rounded {
										border-radius: var(--size-small-gap);
									}

									&.with-padding {
										padding: var(--size-small-gap) var(--size-gap);
									}
								}
							}
						}
					}

					& > div.entry-body {
						margin-top: var(--size-gap);
						line-height: 1.6;

						& p {
							margin-bottom: 0.8em;
						}

						& pre {
							background-color: var(--color-heavy-main);
							padding: var(--size-gap);
							border-radius: var(--size-gap);
							overflow-x: auto;
							margin: 1em 0;
							line-height: 1.2;
						}

						& code {
							font-family: "Cascadia Code", monospace;
							background-color: var(--color-heavy-main);
							padding: 0.1em 0.3em;
							border-radius: var(--size-gap);
						}

						& pre code {
							background-color: transparent;
							padding: 0;
						}

						& blockquote {
							border-left: var(--size-gap) solid var(--color-light-negative);
							padding-left: var(--size-gap);
							margin: 1em 0;
							font-style: italic;
						}

						& img {
							max-width: 100%;
							height: auto;
							border-radius: var(--size-small-gap);
						}
					}
				}
			}
		}

		& div.sentinel {
			width: 100%;
			height: 1px;
			visibility: hidden;
		}

		& span.outro {
			align-self: center;
			text-align: center;
		}
	}

	& footer {
		display: grid;
	}

	& dialog#connections-hub {
		width: calc(12 * var(--size-standart));

		& div.connection-row {
			display: grid;
			grid-template:
				'connection-icon	connection-name	platform-toggle	connection-link	' 1fr
				'connection-icon	connection-note	connection-note	connection-note	' auto
				/ auto auto 1fr 1fr
			;
			border-bottom: var(--size-separator) solid var(--color-heavy-main);

			&[data-status="connected"] {
				color: var(--color-highlight);
				background-color: rgb(from var(--color-highlight) r g b / 20%);
			}

			&[data-status="delayed"] {
				color: var(--color-warn);
				background-color: rgb(from var(--color-warn) r g b / 20%);
			}

			&[data-status="terminated"] {
				color: var(--color-error);
				background-color: rgb(from var(--color-error) r g b / 20%);
			}

			&:last-child {
				border-bottom: none;
			}

			& span.connection-icon.icon {
				grid-area: connection-icon;
				width: var(--size-standart);
				height: var(--size-standart);
			}

			&:not(:has(.connection-note)) span.connection-icon.icon {
				align-self: center;
			}

			& .connection-name {
				grid-area: connection-name;
				align-self: center;
			}

			& label.platform-toggle {
				grid-area: platform-toggle;
				align-self: center;
				height: 1em; /* span.in-line */
			}

				& a.connection-link {
				grid-area: connection-link;
				justify-self: flex-end;
				align-self: center;
			}

				& .connection-note {
				grid-area: connection-note;
			}
		}
	}

	& dialog.loader img[alt="Logo"] {
		content: url(../../assets/icons/loading.gif);
	}
}
